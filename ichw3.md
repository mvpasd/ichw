# 详述通用的高速缓存存储器结构及工作原理 

![cache](http://a4.att.hudong.com/31/12/01000000000000119081287936231.jpg)

主要分为三个部分：

cache存储体,地址转换部件，替换部件。

高速缓存处理器图片
![cache1](https://gss3.bdstatic.com/-Po3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike272%2C5%2C5%2C272%2C90/sign=f631d4c9e51190ef15f69a8daf72f673/574e9258d109b3deef86e04ccebf6c81800a4cdc.jpg)

工作原理

根据程序的局部性原理，在主存和CPU通用寄存器之间设置一个高速的容量相对比较小的存储器，把正在执行的指令地址附近的一部分指令或者数据从主存调入这个存储器，
供CPU在一段时间内使用，这样就能相对的提高CPU的运算速度

工作步骤

中央处理器存取主存储器时，硬件首先自动对存取地址的列号字段进行译
码，以便将联想存储器该列的全部行号与存取主存储器地址的行号字段进行比较：若有相同的，表明要存取的主存储器单元已在高速存储器中，称为命中，硬件就将
存取主存储器的地址映射为高速存储器的地址并执行存取操作；若都不相同，表明该单元不在高速存储器中，称为脱靶，硬件将执行存取主存储器操作并自动将该单
元所在的那一主存储器单元组调入高速存储器相同列中空着的存储单元组中，同时将该组在主存储器中的行号存入联想存储器对应位置的单元内。

当出现脱靶而高速存储器对应列中没有空的位置时，便淘汰该列中的某一组以
腾出位置存放新调入的组，这称为替换。确定替换的规则叫替换算法，常用的替换算法有:最近最少使用算法（LRU）、先进先出法（FIFO）和随机法
（RAND）等。替换部件就是执行这个功能的。另外，当执行写主存储器操作时，为保持主存储器和高速存储器内容的一致性，对命中和脱靶须分别处理。

替换算法

随机法（RAND法）

随机法是随机地确定替换的存储块。设置一个随机数产生器，依据所产生的随机数，确定替换块

先进先出法（FIFO法）

先进先出法是选择那个最先调入的那个块进行替换。当最先调入并被多次命中的块，很可能被优先替换

最近最少使用法（LRU法）

LRU法是依据各块使用的情况， 总是选择那个最近最少使用的块被替换。
